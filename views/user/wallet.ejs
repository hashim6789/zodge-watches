<!DOCTYPE html>
<html lang="en">
  <head>
    <title>My Wallet</title>
    <%- include('partials/_header') %>
    <style>
      .wallet-container {
        margin-top: 50px;
        margin-bottom: 50px;
      }
      .wallet-balance {
        font-size: 2rem;
        color: #28a745;
      }
      .transaction-table {
        margin-top: 30px;
      }
      .add-funds {
        margin-top: 30px;
      }
      .transaction-history th,
      .transaction-history td {
        vertical-align: middle;
      }
      .btn-add-funds {
        background-color: #007bff;
        color: white;
      }
      .btn-add-funds:hover {
        background-color: #0056b3;
      }
    </style>
  </head>
  <body class="animsition">
    <!-- Navbar -->
    <%- include('partials/_navbar', {user, wishlist, cart}) %>

    <!-- Wallet Page Content -->
    <div class="container wallet-container">
      <h2 class="text-center mb-5">My Wallet</h2>

      <!-- Wallet Balance Section -->
      <div class="row">
        <div class="col-md-6 offset-md-3 text-center">
          <h4>Your Current Wallet Balance</h4>
          <div class="wallet-balance">$<%= wallet.balance %></div>
        </div>
      </div>

      <!-- Add Funds Section -->
      <div class="row add-funds">
        <div class="col-md-6 offset-md-3">
          <h5>Add Funds to Your Wallet</h5>
          <form id="addFundsForm" method="POST" action="/wallet/add-funds">
            <div class="form-group">
              <label for="amount">Amount to Add ($)</label>
              <input
                type="number"
                id="amount"
                name="amount"
                class="form-control"
                min="1"
                placeholder="Enter amount"
                required
              />
            </div>
            <button type="submit" class="btn btn-add-funds btn-block">
              Add Funds
            </button>
          </form>
        </div>
      </div>

      <!-- Transaction History Section -->
      <div class="row transaction-table">
        <div class="col-md-12">
          <h5 class="text-center">Transaction History</h5>
          <table class="table table-bordered transaction-history">
            <thead class="thead-dark">
              <tr>
                <th scope="col">#</th>
                <th scope="col">Transaction ID</th>
                <th scope="col">Date</th>
                <th scope="col">Type</th>
                <th scope="col">Amount</th>
                <th scope="col">Status</th>
              </tr>
            </thead>
            <tbody>
              <% wallet.transactions.forEach((transaction, index) => { %>
              <tr>
                <th scope="row"><%= index + 1 %></th>
                <td><%= transaction.transactionId %></td>
                <td><%= new Date(transaction.date).toLocaleString() %></td>
                <td>
                  <%= transaction.type === 'credit' ? 'Credit' : 'Debit' %>
                </td>
                <td>$<%= transaction.amount %></td>
                <td><%= transaction.status %></td>
              </tr>
              <% }) %>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <%- include('partials/_footer') %>

    <!-- Back to Top Button -->
    <div class="btn-back-to-top" id="myBtn">
      <span class="symbol-btn-back-to-top">
        <i class="zmdi zmdi-chevron-up"></i>
      </span>
    </div>

    <%- include('partials/_scripts') %>
  </body>
</html>
