<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Shopping Cart - Checkout</title>
    <%- include('partials/_header') %>
  </head>
  <body class="animsition">
    <!-- Header -->
    <%- include('partials/_navbar', { user }) %>

    <!-- Breadcrumb -->
    <div class="container pt-5">
      <div class="bread-crumb flex-w p-l-25 p-r-15 p-t-30 p-lr-0-lg">
        <a href="/user/auth/home" class="stext-109 cl8 hov-cl1 trans-04">
          Home
          <i class="fa fa-angle-right m-l-9 m-r-10" aria-hidden="true"></i>
        </a>
        <a href="/user/shop/cart" class="stext-109 cl8 hov-cl1 trans-04">
          Shopping Cart
          <i class="fa fa-angle-right m-l-9 m-r-10" aria-hidden="true"></i>
        </a>
        <span class="stext-109 cl4">Checkout</span>
      </div>
    </div>

    <!-- Checkout Section -->
    <div class="container p-t-40 p-b-60">
      <div class="row">
        <!-- Shipping Details -->
        <div class="col-md-7 col-lg-8">
          <div class="p-r-30 p-lr-0-lg">
            <h4 class="mtext-109 cl2 p-b-30">Shipping Details</h4>
            <form id="checkoutForm" onsubmit="submitCheckout(event)">
              <input
                type="hidden"
                name="userId"
                id="userId"
                value="<%= user._id %>"
              />
              <!-- Address Selection Dropdown -->
              <div class="form-group p-b-23">
                <label for="savedAddress">Choose a Saved Address</label>
                <select
                  class="form-control"
                  id="savedAddress"
                  name="savedAddress"
                  onchange="populateAddress(this)"
                >
                  <option value="">Select an address</option>
                  <% addresses.forEach(function(address, index) { %>
                  <option value="<%= index %>">
                    <%= address.firstName %>, <%= address.secondName %>, <%=
                    address.city %>, <%= address.state %>, <%= address.pincode
                    %>, <%= address.country %>, <%= address.street %>,
                  </option>
                  <% }); %>
                </select>
              </div>

              <!-- Existing Form Fields for Shipping Details -->
              <div class="row">
                <div class="col-sm-6 p-b-23">
                  <div class="form-group">
                    <label for="firstName">First Name</label>
                    <input
                      type="text"
                      class="form-control"
                      id="firstName"
                      name="firstName"
                      required
                      onchange="checkAddressFields()"
                    />
                  </div>
                </div>
                <div class="col-sm-6 p-b-23">
                  <div class="form-group">
                    <label for="lastName">Last Name</label>
                    <input
                      type="text"
                      class="form-control"
                      id="lastName"
                      name="lastName"
                    />
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-sm-6 p-b-23">
                  <div class="form-group p-b-23">
                    <label for="email">Email Address</label>
                    <input
                      type="email"
                      class="form-control"
                      id="email"
                      name="email"
                      required
                      onchange="checkAddressFields()"
                    />
                  </div>
                </div>
                <div class="col-sm-6 p-b-23">
                  <div class="form-group p-b-23">
                    <label for="phoneNo">Phone No</label>
                    <input
                      type="number"
                      class="form-control"
                      id="phoneNo"
                      name="phoneNo"
                      required
                      onchange="checkAddressFields()"
                    />
                  </div>
                </div>
              </div>

              <div class="form-group p-b-23">
                <label for="addressLine">Address</label>
                <input
                  type="text"
                  class="form-control"
                  id="addressLine"
                  name="addressLine"
                  required
                  onchange="checkAddressFields()"
                />
              </div>

              <div class="row">
                <div class="col-sm-4 p-b-23">
                  <div class="form-group">
                    <label for="pincode">Pincode</label>
                    <input
                      type="text"
                      class="form-control"
                      id="pincode"
                      name="pincode"
                      onblur="fetchPincodeDetails(this.value)"
                      required
                      onchange="checkAddressFields()"
                    />
                  </div>
                </div>
                <div class="col-sm-4 p-b-23">
                  <div class="form-group p-b-23">
                    <label for="city">City</label>
                    <input
                      type="text"
                      class="form-control"
                      id="city"
                      name="city"
                      required
                      onchange="checkAddressFields()"
                    />
                  </div>
                </div>
                <div class="col-sm-4 p-b-23">
                  <div class="form-group">
                    <label for="state">State</label>
                    <input
                      type="text"
                      class="form-control"
                      id="state"
                      name="state"
                      required
                      onchange="checkAddressFields()"
                    />
                  </div>
                </div>
              </div>

              <div class="form-group p-b-23">
                <label for="country">Country</label>
                <input
                  type="text"
                  class="form-control"
                  id="country"
                  name="country"
                  required
                  onchange="checkAddressFields()"
                />
              </div>

              <div class="form-group p-b-23">
                <label for="flatNo">Flat No</label>
                <input
                  type="text"
                  class="form-control"
                  id="flatNo"
                  name="flatNo"
                />
              </div>

              <!-- Confirm Address Checkbox -->
              <!-- Confirm Address Checkbox -->
              <div class="form-group p-b-23">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="confirmAddress"
                    disabled
                    required
                    onchange="togglePaymentOptions(this)"
                  />
                  <label class="form-check-label" for="confirmAddress">
                    I confirm that the above address is correct.
                  </label>
                </div>
              </div>

              <!-- Payment Options -->
              <div class="form-group p-b-23">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="paymentMethod"
                    id="cod"
                    value="cod"
                    disabled
                    required
                  />
                  <label class="form-check-label" for="cod"
                    >Cash on Delivery</label
                  >
                </div>
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="paymentMethod"
                    id="onlinePayment"
                    value="onlinePayment"
                    disabled
                    required
                  />
                  <label class="form-check-label" for="onlinePayment"
                    >Online Payment</label
                  >
                </div>
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="paymentMethod"
                    id="wallet"
                    value="wallet"
                    disabled
                    required
                  />
                  <label class="form-check-label" for="wallet">Wallet</label>
                </div>
              </div>

              <!-- Submit Button -->
              <div class="form-group p-b-23">
                <button class="btn btn-primary" id="placeOrderBtn">
                  Place Order
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Order Summary -->
        <!-- <div class="col-md-5 col-lg-4">
          <div class="p-lr-15-lg">
            <h4 class="mtext-109 cl2 p-b-30">Order Summary</h4>
            <div class="flex-w flex-t p-b-13">
              <div class="size-208">
                <span class="stext-110 cl2">Subtotal:</span>
              </div>
              <div class="size-209">
                <span class="mtext-110 cl2">â‚¹<%= cart.subtotal %></span>
              </div>
            </div>

            <div class="flex-w flex-t p-t-15 p-b-30">
              <div class="size-208 p-t-1">
                <span class="stext-110 cl2">Total:</span>
              </div>
              <div class="size-209 p-t-1">
                <span class="mtext-110 cl2">â‚¹<%= cart.total %></span>
              </div>
            </div>

            <button
              type="button"
              class="flex-c-m stext-101 cl0 size-116 bg3 bor14 hov-btn3 p-lr-15 trans-04 pointer"
              onclick=""
            >
              Place Order
            </button>
          </div>
        </div> -->
      </div>
    </div>

    <!-- Footer -->
    <%- include('partials/_footer') %>

    <!-- Back to top -->
    <div class="btn-back-to-top" id="myBtn">
      <span class="symbol-btn-back-to-top">
        <i class="zmdi zmdi-chevron-up"></i>
      </span>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
      integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
      integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <%- include('partials/_scripts') %>

    <script src="/public/user/js/main.js"></script>

    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script src="/public/user/js/checkout.js"></script>
  </body>
</html>
